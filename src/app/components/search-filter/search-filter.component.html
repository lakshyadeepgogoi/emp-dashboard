<div class="search-filter-container">
    <div class="filter-row">
        <div class="search-box">
            <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
            </svg>
            <input type="text" placeholder="Search by name or email..." [(ngModel)]="searchTerm" (input)="onSearch()"
                class="search-input" />
            @if (searchTerm) {
            <button class="clear-search" (click)="searchTerm = ''; onSearch()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                </svg>
            </button>
            }
        </div>

        <div class="filter-group">
            <label class="filter-label">Department</label>
            <select [(ngModel)]="selectedDepartment" (change)="onDepartmentChange()" class="filter-select">
                <option value="all">All Departments</option>
                @for (dept of departments; track dept) {
                <option [value]="dept">{{ dept }}</option>
                }
            </select>
        </div>

        <div class="sort-group">
            <label class="filter-label">Sort by</label>
            <div class="sort-buttons">
                <button class="sort-btn" [class.active]="isSortActive('name')" (click)="onSort('name')">
                    <span>Name</span>
                    @if (isSortActive('name')) {
                    @if (employeeService.sortConfig().direction === 'asc') {
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 14l5-5 5 5z" />
                    </svg>
                    } @else {
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 10l5 5 5-5z" />
                    </svg>
                    }
                    }
                </button>
                <button class="sort-btn" [class.active]="isSortActive('dateOfJoining')"
                    (click)="onSort('dateOfJoining')">
                    <span>Date Joined</span>
                    @if (isSortActive('dateOfJoining')) {
                    @if (employeeService.sortConfig().direction === 'asc') {
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 14l5-5 5 5z" />
                    </svg>
                    } @else {
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 10l5 5 5-5z" />
                    </svg>
                    }
                    }
                </button>
            </div>
        </div>

        @if (hasActiveFilters) {
        <button class="clear-filters-btn" (click)="clearFilters()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
            </svg>
            Clear Filters
        </button>
        }

        <button class="add-btn" (click)="onAddEmployee()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
            </svg>
            <span>Add Employee</span>
        </button>
    </div>

    <div class="results-info">
        <span class="results-count">
            Showing <strong>{{ employeeService.filteredCount() }}</strong> of <strong>{{ employeeService.totalCount()
                }}</strong> employees
        </span>
    </div>
</div>